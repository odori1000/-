<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ì•„ëœ°ë¦¬ì— ê°€ì£½ê³µë°©ì˜ í”„ë¦¬ë¯¸ì—„ ìˆ˜ê³µì˜ˆ ê°€ì£½ ì§€ê°‘">
    <title>ì œí’ˆ ìƒì„¸ | ì•„ëœ°ë¦¬ì— ê°€ì£½ê³µë°©</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ‘›</text></svg>">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">ì•„ëœ°ë¦¬ì— <span>ê°€ì£½ê³µë°©</span></a>
            <nav class="nav">
                <a href="index.html" class="nav-link">í™ˆ</a>
                <a href="products.html" class="nav-link">ì œí’ˆ</a>
                <a href="index.html#brand-story" class="nav-link">ë¸Œëœë“œ ìŠ¤í† ë¦¬</a>
                <a href="cart.html" class="nav-link cart-icon">
                    ğŸ›’
                    <span class="cart-count" id="cartCount">0</span>
                </a>
            </nav>
            <button class="mobile-menu-btn" aria-label="ë©”ë‰´">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="product-detail section">
        <div class="container">
            <div class="product-detail-grid">
                <!-- Product Gallery -->
                <div class="product-gallery">
                    <div class="gallery-main">
                        <img id="mainImage" src="" alt="">
                    </div>
                    <div class="gallery-thumbs" id="galleryThumbs">
                        <!-- Thumbnails will be rendered here -->
                    </div>
                </div>

                <!-- Product Info -->
                <div class="product-detail-info">
                    <p class="product-category" id="productCategory"></p>
                    <h1 id="productName"></h1>

                    <div class="product-rating">
                        <span class="stars" id="productStars"></span>
                        <span class="rating-count" id="productRating"></span>
                    </div>

                    <p class="product-detail-price">
                        <span id="productPrice"></span>
                        <span id="originalPrice" class="product-price-original" style="font-size: 1.2rem;"></span>
                    </p>

                    <div class="product-options">
                        <!-- Color Options -->
                        <div class="option-group">
                            <label class="option-label">ìƒ‰ìƒ: <span id="selectedColorName"></span></label>
                            <div class="color-options" id="colorOptions">
                                <!-- Colors will be rendered here -->
                            </div>
                        </div>

                        <!-- Quantity -->
                        <div class="option-group">
                            <label class="option-label">ìˆ˜ëŸ‰</label>
                            <div class="quantity-selector">
                                <button class="quantity-btn" onclick="changeQuantity(-1)">âˆ’</button>
                                <span class="quantity-value" id="quantity">1</span>
                                <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="product-buttons">
                        <button class="btn btn-dark btn-lg" onclick="handleAddToCart()" style="flex: 1;">
                            ğŸ›’ ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
                        </button>
                        <button class="btn btn-primary btn-lg" onclick="handleBuyNow()" style="flex: 1;">
                            âš¡ ë°”ë¡œ êµ¬ë§¤í•˜ê¸°
                        </button>
                    </div>

                    <!-- Product Description -->
                    <div class="product-description">
                        <div class="product-tabs">
                            <div class="product-tab active" data-tab="description">ìƒì„¸ ì •ë³´</div>
                            <div class="product-tab" data-tab="features">ì†Œì¬ ë° íŠ¹ì§•</div>
                            <div class="product-tab" data-tab="care">ê´€ë¦¬ ë°©ë²•</div>
                        </div>

                        <div class="tab-content" id="tabContent">
                            <div id="descriptionTab">
                                <p id="productDescription"></p>
                            </div>
                            <div id="featuresTab" style="display: none;">
                                <ul id="productFeatures" style="padding-left: 20px;"></ul>
                            </div>
                            <div id="careTab" style="display: none;">
                                <ul style="padding-left: 20px; color: var(--color-text-secondary);">
                                    <li style="margin-bottom: 8px;">ì§ì‚¬ê´‘ì„ ì„ í”¼í•´ ì„œëŠ˜í•œ ê³³ì— ë³´ê´€í•´ì£¼ì„¸ìš”.</li>
                                    <li style="margin-bottom: 8px;">ë¬¼ì— ì –ì—ˆì„ ê²½ìš° ë¶€ë“œëŸ¬ìš´ ì²œìœ¼ë¡œ ë‹¦ì•„ ìì—°ê±´ì¡°í•´ì£¼ì„¸ìš”.</li>
                                    <li style="margin-bottom: 8px;">ê°€ì£½ ì „ìš© í¬ë¦¼ìœ¼ë¡œ ì£¼ê¸°ì ì¸ ê´€ë¦¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</li>
                                    <li style="margin-bottom: 8px;">ì¥ê¸°ê°„ ì‚¬ìš©í•˜ì§€ ì•Šì„ ì‹œ í˜•íƒœ ìœ ì§€ë¥¼ ìœ„í•´ ì¢…ì´ë¥¼ ë„£ì–´ ë³´ê´€í•´ì£¼ì„¸ìš”.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Related Products -->
    <section class="section" style="background: var(--color-bg-card);">
        <div class="container">
            <div class="section-header">
                <h2>í•¨ê»˜ ë³´ë©´ ì¢‹ì€ <span class="text-gold">ì œí’ˆ</span></h2>
            </div>
            <div class="products-grid" id="relatedProducts">
                <!-- Related products will be rendered here -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <a href="index.html" class="logo">ì•„ëœ°ë¦¬ì— <span>ê°€ì£½ê³µë°©</span></a>
                    <p>30ë…„ ì „í†µì˜ ì¥ì¸ì •ì‹ ìœ¼ë¡œ ë§Œë“œëŠ”<br>í”„ë¦¬ë¯¸ì—„ ìˆ˜ê³µì˜ˆ ê°€ì£½ ì§€ê°‘</p>
                    <div class="footer-social">
                        <a href="#" aria-label="ì¸ìŠ¤íƒ€ê·¸ë¨">ğŸ“·</a>
                        <a href="#" aria-label="í˜ì´ìŠ¤ë¶">ğŸ“˜</a>
                        <a href="#" aria-label="ì¹´ì¹´ì˜¤í†¡">ğŸ’¬</a>
                    </div>
                </div>
                <div class="footer-column">
                    <h4>ì œí’ˆ</h4>
                    <ul>
                        <li><a href="products.html?category=half">ë°˜ì§€ê°‘</a></li>
                        <li><a href="products.html?category=long">ì¥ì§€ê°‘</a></li>
                        <li><a href="products.html?category=card">ì¹´ë“œì§€ê°‘</a></li>
                        <li><a href="products.html?category=clip">ë¨¸ë‹ˆí´ë¦½</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>ê³ ê° ì„œë¹„ìŠ¤</h4>
                    <ul>
                        <li><a href="#">ë°°ì†¡ ì•ˆë‚´</a></li>
                        <li><a href="#">êµí™˜ ë° ë°˜í’ˆ</a></li>
                        <li><a href="#">A/S ì•ˆë‚´</a></li>
                        <li><a href="#">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>ì—°ë½ì²˜</h4>
                    <ul>
                        <li>ğŸ“ 02-1234-5678</li>
                        <li>ğŸ“§ hello@atelier-leather.kr</li>
                        <li>ğŸ• í‰ì¼ 10:00 - 18:00</li>
                        <li>ğŸ“ ì„œìš¸ì‹œ ì„±ë™êµ¬ ì„±ìˆ˜ë™</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Â© 2024 ì•„ëœ°ë¦¬ì— ê°€ì£½ê³µë°©. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        let currentProduct = null;
        let selectedColorIndex = 0;
        let quantity = 1;

        // ì œí’ˆ ì •ë³´ ë¡œë“œ
        function loadProduct() {
            const productId = getUrlParam('id') || 1;
            currentProduct = getProductById(productId);

            if (!currentProduct) {
                window.location.href = 'products.html';
                return;
            }

            // í˜ì´ì§€ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
            document.title = `${currentProduct.name} | ì•„ëœ°ë¦¬ì— ê°€ì£½ê³µë°©`;

            // ê¸°ë³¸ ì •ë³´
            document.getElementById('productCategory').textContent = currentProduct.categoryName;
            document.getElementById('productName').textContent = currentProduct.name;
            document.getElementById('productPrice').textContent = formatPrice(currentProduct.price);
            document.getElementById('productDescription').textContent = currentProduct.description;

            // í• ì¸ê°€
            const originalPriceEl = document.getElementById('originalPrice');
            if (currentProduct.originalPrice) {
                originalPriceEl.textContent = formatPrice(currentProduct.originalPrice);
                originalPriceEl.style.display = 'inline';
            } else {
                originalPriceEl.style.display = 'none';
            }

            // ë³„ì 
            document.getElementById('productStars').textContent = generateStars(currentProduct.rating);
            document.getElementById('productRating').textContent =
                `${currentProduct.rating} (${currentProduct.reviewCount}ê°œì˜ ë¦¬ë·°)`;

            // ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
            document.getElementById('mainImage').src = currentProduct.images[0];
            document.getElementById('mainImage').alt = currentProduct.name;

            const thumbsContainer = document.getElementById('galleryThumbs');
            thumbsContainer.innerHTML = currentProduct.images.map((img, index) => `
                <div class="gallery-thumb ${index === 0 ? 'active' : ''}" onclick="changeMainImage(${index})">
                    <img src="${img}" alt="${currentProduct.name} ì´ë¯¸ì§€ ${index + 1}">
                </div>
            `).join('');

            // ìƒ‰ìƒ ì˜µì…˜
            const colorContainer = document.getElementById('colorOptions');
            colorContainer.innerHTML = currentProduct.colors.map((color, index) => `
                <div class="color-option ${index === 0 ? 'active' : ''}" 
                     style="background-color: ${color};" 
                     onclick="selectColor(${index})"
                     title="${currentProduct.colorNames[index]}">
                </div>
            `).join('');
            document.getElementById('selectedColorName').textContent = currentProduct.colorNames[0];

            // íŠ¹ì§•
            const featuresContainer = document.getElementById('productFeatures');
            featuresContainer.innerHTML = currentProduct.features.map(feature =>
                `<li style="margin-bottom: 8px; color: var(--color-text-secondary);">${feature}</li>`
            ).join('');

            // ê´€ë ¨ ì œí’ˆ
            loadRelatedProducts();
        }

        // ê´€ë ¨ ì œí’ˆ ë¡œë“œ
        function loadRelatedProducts() {
            const related = products
                .filter(p => p.id !== currentProduct.id && p.category === currentProduct.category)
                .slice(0, 4);

            // ê´€ë ¨ ì œí’ˆì´ ë¶€ì¡±í•˜ë©´ ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ì—ì„œ ì±„ì›€
            if (related.length < 4) {
                const others = products
                    .filter(p => p.id !== currentProduct.id && !related.includes(p))
                    .slice(0, 4 - related.length);
                related.push(...others);
            }

            const container = document.getElementById('relatedProducts');
            container.innerHTML = related.map(p => createProductCardHTML(p)).join('');
        }

        // ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½
        function changeMainImage(index) {
            document.getElementById('mainImage').src = currentProduct.images[index];

            document.querySelectorAll('.gallery-thumb').forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });
        }

        // ìƒ‰ìƒ ì„ íƒ
        function selectColor(index) {
            selectedColorIndex = index;
            document.getElementById('selectedColorName').textContent = currentProduct.colorNames[index];

            document.querySelectorAll('.color-option').forEach((option, i) => {
                option.classList.toggle('active', i === index);
            });
        }

        // ìˆ˜ëŸ‰ ë³€ê²½
        function changeQuantity(change) {
            quantity = Math.max(1, quantity + change);
            document.getElementById('quantity').textContent = quantity;
        }

        // ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
        function handleAddToCart() {
            addToCart(currentProduct.id, quantity, selectedColorIndex);
        }

        // ë°”ë¡œ êµ¬ë§¤
        function handleBuyNow() {
            buyNow(currentProduct.id, quantity, selectedColorIndex);
        }

        // íƒ­ ì „í™˜
        function setupTabs() {
            document.querySelectorAll('.product-tab').forEach(tab => {
                tab.addEventListener('click', function () {
                    const tabName = this.dataset.tab;

                    // íƒ­ í™œì„±í™”
                    document.querySelectorAll('.product-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');

                    // ì½˜í…ì¸  ì „í™˜
                    document.getElementById('descriptionTab').style.display = tabName === 'description' ? 'block' : 'none';
                    document.getElementById('featuresTab').style.display = tabName === 'features' ? 'block' : 'none';
                    document.getElementById('careTab').style.display = tabName === 'care' ? 'block' : 'none';
                });
            });
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function () {
            loadProduct();
            setupTabs();
        });
    </script>
</body>

</html>